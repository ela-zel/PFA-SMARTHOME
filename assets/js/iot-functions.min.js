var iot;!function(a){"use strict";var t;t={centerModal:function(){var t=a(this),e=t.find(".modal-dialog");t.css("display","block"),e.css("margin-top",Math.max(0,(a(window).height()-e.height())/2))},toggleUnit:function(t,e){var s=JSON.parse(localStorage.getItem("switchValues"))||{};a('[data-unit="'+t+'"]').toggleClass("active"),a("#"+t).closest("label").toggleClass("checked",e),localStorage&&(s[t]=e,localStorage.setItem("switchValues",JSON.stringify(s)))},switchSingle:function(t,e){switch(t){case"switch-house-lock":iot.toggleUnit(t,e),e&&iot.armingModal(t);break;case"switch-house-lock-pin":iot.armingModalPIN(t,e);break;case"switch-light-doorway":iot.toggleUnit(t,e),a("#doorway-light").toggleClass("active");break;case"switch-light-garage":iot.toggleUnit(t,e),a("#garage-light").toggleClass("active");break;case"switch-camera-1":case"switch-camera-2":e?iot.connectCam(t):a('[data-unit="'+t+'"] video')[0].pause(),iot.toggleUnit(t,e);break;default:iot.toggleUnit(t,e)}},switchGroup:function(t,e){var s='[data-unit-group="'+t+'"]',i=JSON.parse(localStorage.getItem("switchValues"))||{};switch(e){case"all-on":a(s+" [data-unit]").each(function(){var t=a(this).data("unit");a("#"+t).prop("disabled")||(a(this).addClass("active"),a("#"+t).prop("checked",!0),a("#"+t).closest("label").addClass("checked"),i[t]=!0)});break;case"all-off":a(s+" [data-unit]").each(function(){var t=a(this).data("unit");a("#"+t).prop("disabled")||(a(this).removeClass("active"),a("#"+t).prop("checked",!1),a("#"+t).closest("label").removeClass("checked"),i[t]=!1)})}localStorage&&localStorage.setItem("switchValues",JSON.stringify(i))},armingModal:function(t){a('[data-unit="'+t+'"]').hasClass("active")||a('[data-unit="'+t+'"]').addClass("active"),a("#armModal").modal("show"),a("#armTimer .timer").timer({countdown:!0,format:"%s",duration:"10s",callback:function(){a("#armModal").modal("hide")}})},armingModalPIN:function(t,e){a("#armModalPIN").modal("show");var s=0;a('[data-action="enter-key"]').click(function(){4==(s+=1)?(a("#hidden-key").append(" &#9679;"),a('[data-action="enter-key"]').off(),iot.toggleUnit(t,e),setTimeout(function(){e?(iot.armingModal(t),a("#house-disarmed").css("opacity","0"),a("#house-armed").css("opacity","1")):(a("#house-disarmed").css("opacity","1"),a("#house-armed").css("opacity","0")),a("#armModalPIN").modal("hide"),a("#hidden-key").html("&nbsp;")},300)):a("#hidden-key").append(" &#9679;")}),a('[data-action="clear-key"]').click(function(){s=0,a("#hidden-key").html("&nbsp;")})},garageDoorsRoll:function(t,e){var s='[data-unit="'+t+'"]',i=a("#roll-doors");switch(e){case"open":a(i).toggleClass("active"),a(i).timer({attribute:"aria-valuenow",style:"stroke-dashoffset",style_unit:"",duration:a(i).attr("aria-valuemax")+"s",callback:function(){a(i).timer("remove"),a(i).toggleClass("active"),a(s).toggleClass("active"),a(s+" .status").html("Open"),a(s+' [data-action="pause"]').hide(),a(s+' [data-action="close"]').show()}}),a(s+" .status").toggleClass("text-secondary"),a(s+" .status").html("In progress"),a(s+' [data-action="open"]').hide(),a(s+' [data-action="pause"]').show();break;case"pause":a(i).timer("pause"),a(s+" .status").html("Paused"),a(s+' [data-action="pause"]').hide(),a(s+' [data-action="resume"]').show();break;case"resume":a(i).timer("resume"),a(s+" .status").html("In progress"),a(s+' [data-action="resume"]').hide(),a(s+' [data-action="pause"]').show();break;case"close":a(i).toggleClass("active"),a(i).timer({countdown:!0,attribute:"aria-valuenow",style:"stroke-dashoffset",style_unit:"",duration:a(i).attr("aria-valuemax")+"s",callback:function(){a(i).timer("remove"),a(s).toggleClass("active"),a(i).toggleClass("active"),a(s+" .status").toggleClass("text-secondary"),a(s+" .status").html("Closed"),a(s+' [data-action="pause"]').hide(),a(s+' [data-action="open"]').show()}}),a(s+" .status").html("In progress"),a(s+' [data-action="close"]').hide(),a(s+' [data-action="pause"]').show()}},garageDoors:function(t,e){var s='[data-unit="'+t+'"]';switch(e){case"open":a(s+" .timer").timer({attribute:"aria-valuenow",style:"width",style_unit:"%",duration:a(s+" .timer").attr("aria-valuemax")+"s",callback:function(){a(s+" .timer").timer("remove"),a(s).toggleClass("active"),a(s+" .status").html("Open"),a(s+' [data-action="pause"]').hide(),a(s+' [data-action="close"]').show()}}),a(s+" .status").toggleClass("text-secondary"),a(s+" .status").html("In progress"),a(s+' [data-action="open"]').hide(),a(s+' [data-action="pause"]').show();break;case"pause":a(s+" .timer").timer("pause"),a(s+" .status").html("Paused"),a(s+' [data-action="pause"]').hide(),a(s+' [data-action="resume"]').show();break;case"resume":a(s+" .timer").timer("resume"),a(s+" .status").html("In progress"),a(s+' [data-action="resume"]').hide(),a(s+' [data-action="pause"]').show();break;case"close":a(s+" .timer").timer({countdown:!0,attribute:"aria-valuenow",style:"width",style_unit:"%",duration:a(s+" .timer").attr("aria-valuemax")+"s",callback:function(){a(s+" .timer").timer("remove"),a(s).toggleClass("active"),a(s+" .status").toggleClass("text-secondary"),a(s+" .status").html("Closed"),a(s+' [data-action="pause"]').hide(),a(s+' [data-action="open"]').show()}}),a(s+" .status").html("In progress"),a(s+' [data-action="close"]').hide(),a(s+' [data-action="pause"]').show()}},washMachine:function(t,e){var s='[data-unit="'+t+'"]';switch(e){case"pause":a("#wash-machine").timer("pause"),a(s+" .status").html("Paused"),a(s+" .status").addClass("text-muted"),a(s+' [data-action="pause"]').hide(),a(s+' [data-action="resume"]').show();break;case"resume":a("#wash-machine").timer("resume"),a(s+" .status").html("ON"),a(s+" .status").removeClass("text-muted"),a(s+' [data-action="resume"]').hide(),a(s+' [data-action="pause"]').show()}},positionFab:function(){var t=a("#main");!!t.get(0)&&t.get(0).scrollHeight>t.innerHeight()&&a("#info-toggler").css("right","40px")},connectCam:function(t){a('[data-unit="'+t+'"] .card-preloader').css("display","block"),setTimeout(function(){a('[data-unit="'+t+'"] .card-preloader').fadeOut(),a('[data-unit="'+t+'"] video')[0].play()},800)},clearCountdown:function(){a("#"+this.id+"  .timer").timer("remove")},clearKeyboard:function(){a("#hidden-key").html("&nbsp;"),a('[data-action="enter-key"]').off();var t=a("#switch-house-lock-pin");if(t.is(":checkbox")){t.is(":checked")?t.prop("checked",!1):t.prop("checked",!0)}a("#armModalPIN").modal("hide")}},window.iot=t}(this.jQuery);